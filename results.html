<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Results History</title>
<style>
  :root{ --bg:#fff; --text:#111; --muted:#5b5e64; --brand:#1a73e8; --border:#e6e8ee; --panel:#0b0b0b;
         --choice:#f3f4f7; --choice-border:#dfe3ea; --choice-hover:#e9eef7; --correct:#188038; --wrong:#d93025; }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;line-height:1.6}
  .topbar{background:var(--panel);color:#fff;padding:14px 16px;position:sticky;top:0;z-index:10}
  .wrap{max-width:960px;margin:0 auto;padding:0 16px}
  .title{font-weight:800;font-size:1.05rem}.subtitle{opacity:.8;font-size:.9rem}
  main{padding:18px 0 40px}.card{border:1px solid var(--border);background:#fff;border-radius:12px;padding:16px;margin:14px 0}
  .passage{border:1px solid var(--border);border-radius:10px;padding:14px;background:#fcfdff}
  .qhead{font-weight:700;margin-top:12px}.choose{margin:10px 0 6px;font-weight:600}
  .choices{display:grid;gap:10px}.choice{display:flex;gap:12px;align-items:flex-start;padding:12px;background:var(--choice);border:1px solid var(--choice-border);border-radius:10px;cursor:pointer}
  .choice:hover{background:var(--choice-hover)}.circle{width:22px;height:22px;border:2px solid var(--choice-border);border-radius:50%;display:inline-block;margin-top:2px;flex:0 0 auto}
  input[type="radio"]{display:none}input[type="radio"]:checked + .circle{border-color:var(--brand);box-shadow:0 0 0 4px rgba(26,115,232,.15) inset}
  .nav{display:flex;gap:10px;margin-top:16px}button{border:1px solid var(--border);background:#fff;border-radius:10px;padding:10px 14px;cursor:pointer}
  button.primary{background:var(--brand);color:#fff;border-color:var(--brand)}button:disabled{opacity:.5;cursor:not-allowed}
  .resultBox{border:1px solid var(--border);background:#f7fafc;border-radius:12px;padding:16px}.good{color:var(--correct);font-weight:800}.bad{color:var(--wrong);font-weight:800}
  .pill{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--border);background:#f6f7fb;font-size:.85rem;color:#333}
  .muted{color:var(--muted)} .footnote{color:var(--muted);font-size:.9rem;margin-top:10px}
  .list{display:grid;gap:10px} .tile{border:1px solid var(--border);border-radius:12px;padding:14px;background:#fff;display:flex;gap:10px;align-items:center;text-decoration:none;color:inherit}
  .tile .spacer{flex:1}
  .small{font-size:.92rem}
</style>
</head>
<body>
<div class="topbar"><div class="wrap"><div class="title">Results History</div><div class="subtitle">Local to this device</div></div></div>
<main class="wrap">

<section class="card">
  <div style="font-weight:800;font-size:1.1rem;margin-bottom:6px">Your Saved Results</div>
  <div id="hist"></div>
  <div class="nav" style="margin-top:10px">
    <a href="index.html"><button>Back to Tests</button></a>
    <div class="spacer"></div>
    <button id="clearBtn" class="primary">Clear History</button>
  </div>
</section>
<script>
function render(){
  const hist = document.getElementById('hist');
  let arr=[]; try{ arr = JSON.parse(localStorage.getItem('reading_results_v1') || '[]'); }catch(e){ arr=[]; }
  if(arr.length===0){ hist.innerHTML = '<div class="muted">No results saved yet.</div>'; return; }
  const rows = arr.slice().reverse().map(r=>{
    const d = new Date(r.ts);
    return `<div class="tile"><div>${d.toLocaleString()}</div><div class="spacer"></div><div><strong>${r.test}</strong></div><div class="spacer"></div><div class="pill">${r.correct}/${r.total} (${r.score}%)</div></div>`;
  }).join('');
  hist.innerHTML = rows;
}
document.getElementById('clearBtn').onclick = ()=>{ if(confirm('Clear all saved results on this device?')){ localStorage.removeItem('reading_results_v1'); render(); } };
document.addEventListener('DOMContentLoaded', render);
</script>

</main>
</body>
</html>
